# Name: mkp_gravatar v1.0 
# Type: Public plugin
# Yet Another Textpattern Gravatar Plugin
# Author: Michael K Pate
# URL: https://github.com/michaelkpate/mkp_gravatar
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjEyOiJta3BfZ3JhdmF0YXIiO3M6NjoiYXV0aG9yIjtzOjE0
OiJNaWNoYWVsIEsgUGF0ZSI7czoxMDoiYXV0aG9yX3VyaSI7czo0NDoiaHR0cHM6Ly9naXRo
dWIuY29tL21pY2hhZWxrcGF0ZS9ta3BfZ3JhdmF0YXIiO3M6NzoidmVyc2lvbiI7czozOiIx
LjAiO3M6MTE6ImRlc2NyaXB0aW9uIjtzOjM5OiJZZXQgQW5vdGhlciBUZXh0cGF0dGVybiBH
cmF2YXRhciBQbHVnaW4iO3M6NDoiY29kZSI7czo4NjA6IglmdW5jdGlvbiBta3BfZ3JhdmF0
YXIoJGF0dHMpDQoJew0KCQ0KCQlnbG9iYWwgJHRoaXNjb21tZW50Ow0KCQ0KCQlleHRyYWN0
KGxBdHRzKGFycmF5KA0KCQkJJ2VtYWlsJyAgID0+ICcnLAkNCgkJCSdzaXplJyAgID0+ICc4
MCcsDQoJCQknZGVmYXVsdCcgICA9PiAnJywNCgkJCSdyYXRpbmcnICAgPT4gJ2cnLA0KCQkJ
J3NlY3VyZScgICA9PiAnMCcsCQ0KCQkJJ2ltYWdlJyAgID0+ICcxJywJDQoJCQknY2xhc3Mn
ICAgPT4gJycsCQkNCgkJCSdhbHQnICA9PiAnJw0KCQkpLCRhdHRzKSk7DQoJCQ0KCQkkaHR0
cCA9IChpc3NldCgkc2VjdXJlKSkgPyAnaHR0cHM6Ly8nIDogJ2h0dHA6Ly8nOw0KCQkNCgkJ
JGVtYWlsIAk9ICghZW1wdHkoZW1haWxdKSkgPyBtZDUoc3RydG9sb3dlcih0cmltKHBhcnNl
KCRhdHRzWydlbWFpbCddKSkpKSA6IG1kNShzdHJ0b2xvd2VyKHRyaW0oJHRoaXNjb21tZW50
WydlbWFpbCddKSkpOw0KIA0KCQkkdXJsID0gJGh0dHAuJ3d3dy5ncmF2YXRhci5jb20vYXZh
dGFyLyc7DQoJCSR1cmwgPSAuJGVtYWlsOw0KCQkkdXJsID0gLidzPScuJHNpemU7DQoJCSR1
cmwgPSAuJyZkPScuJGRlZmF1bHQ7DQoJCSR1cmwgPSAuJyZyPScuJHJhdGluZzsNCgkJDQoJ
CWlmIChpc3NldCgkaW1hZ2UpKSB7DQoJCQkkdXJsID0gJzxpbWcgc3JjPSInIC4gJHVybCAu
ICciOw0KCQkJaWYgKGlzc2V0KCRjbGFzcykpIHsJCQ0KCQkJCSR1cmwgPSAkdXJsLicgY2xh
c3M9IicuJGNsYXNzLiciICc7DQoJCQl9DQoJCQlpZiAoaXNzZXQoJGFsdCkpIHsJCQ0KCQkJ
CSR1cmwgPSAkdXJsLicgYWx0PSInLiRhbHQuJyIgJzsNCgkJCX0NCgkJCSR1cmwgLj0gJy8+
JzsNCgkJfQ0KIA0KCQlyZXR1cm4gJHVybDsNCgl9IjtzOjQ6InR5cGUiO3M6MToiMCI7czo1
OiJvcmRlciI7czoxOiI1IjtzOjU6ImZsYWdzIjtzOjE6IjAiO3M6NDoiaGVscCI7czo0Mjk0
OiIJPGgxPm1rcF9ncmF2YXRhcjwvaDE+CgoJPHA+VGhpcyB0YWcgcmV0dXJucyBhbiBpbWFn
ZXRhZyBvciBhbiB1cmwgd2l0aCB0aGUgZ3JhdmF0YXIgZm9yIHRoZSBlbWFpbCBhZGRyZXNz
IG9mIHRoZSBjdXJyZW50IGNvbW1lbnQgb3IgYW55IGdpdmVuIGVtYWlsIGFkZHJlc3MuPC9w
PgoKCTxoMj5BY2tub3dsZWRnZW1lbnRzPC9oMj4KCgk8cD5QcmV2aW91c2x5LCB0aGVyZSBo
YXZlIGJlZW4gdHdvIG90aGVyIEdyYXZhdGFyIHBsdWdpbnMgZm9yIFRleHRwYXR0ZXJuIGJ1
dCBib3RoIGFyZSBjdXJyZW50bHkgaW4gb3JwaGFuIHN0YXR1cy4gSSBzdGFydGVkIHRoaXMg
b25lIGZyb20gc2NyYXRjaCB1c2luZyA8YSBocmVmPSJodHRwczovL2VuLmdyYXZhdGFyLmNv
bS9zaXRlL2ltcGxlbWVudC9pbWFnZXMvcGhwLyI+PHNwYW4gY2xhc3M9ImNhcHMiPlBIUDwv
c3Bhbj4gSW1hZ2UgUmVxdWVzdHM8L2E+IGZyb20gdGhlIEdyYXZhdGFyIERldmVsb3BlciBS
ZXNvdXJjZXMuIEJ1dCBJIGFsc28gbG9va2VkIGF0IGdseF9ncmF2YXRhciBmb3IgaW1wbGVt
ZW50YXRpb24gaWRlYXMgKGFuZCB0aGUgZm9ybWF0IG9mIHRoaXMgaGVscCBkb2N1bWVudCku
PC9wPgoKCTxoMj5MaW5rczwvaDI+CgoJPHVsPgoJCTxsaT48YSBocmVmPSJodHRwczovL2dp
dGh1Yi5jb20vbWljaGFlbGtwYXRlL21rcF9ncmF2YXRhciI+R2l0aHViIENvZGUgUmVwb3Np
dG9yeTwvYT48L2xpPgoJCTxsaT48YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vbWljaGFl
bGtwYXRlL21rcF9ncmF2YXRhciI+RG93bmxvYWQ8L2E+PC9saT4KCTwvdWw+CgoJPGgyPm1r
cF9ncmF2YXRhcjwvaDI+CgoJPHA+SnVzdCB1c2UgJmx0O3R4cDpta3BfZ3JhdmF0YXIgLyZn
dDsgd2hlcmUgZXZlciB5b3UgbmVlZCBhIGdyYXZhdGFyIHRvIGJlIGRpc3BsYXllZC4gSWYg
eW91IHB1dCB0aGlzIHRhZyBpbnRvIGEgY29tbWVudCBmb3JtIHRoZSBncmF2YXRhciB3aWxs
IGJlIGNvbnN0cnVjdGVkIHVzaW5nIHRoZSBlbWFpbCBhZGRyZXNzIGdpdmVuIGJ5IHRoZSBj
dXJyZW50IGNvbW1lbnQuIElmIHlvdSBwdXQgdGhpcyB0YWcgYW55d2hlcmUgZWxzZSAod2hl
cmUgbWtwX2dyYXZhdGFyIGhhcyBubyBhY2Nlc3MgdG8gYSBjb21tZW50IGVtYWlsIGFkZHJl
c3MpIHlvdSBjYW4gc3VwcGx5IGFuIGVtYWlsIGFkZHJlc3MgYnkgdGhlIGF0dHJpYnV0ZSBl
bWFpbCB0byBjcmVhdGUgdGhlIGFjY29tcGFueWluZyBncmF2YXRhci48L3A+PC9wPgoKCTxo
Mz5BdHRyaWJ1dGVzPC9oMz4KCgk8aDQ+ZW1haWwgKGRlZmF1bHQ6IGVtcHR5L2VtYWlsIGFk
ZHJlc3Mgb2YgY3VycmVudCBjb21tZW50YXRvcik8L2g0PjwvaDQ+CgoJPHA+VXNlZCBpbnNp
ZGUgYSBjb21tZW50IGZvcm0gdGhlIHBsdWdpbiB3aWxsIGNob29zZSB0aGUgY3VycmVudCBj
b21tZW50ZXJzIGVtYWlsIGFkZHJlc3MuIElmIHlvdSB1c2UgdGhpcyB0YWcgb3V0c2lkZSBv
ZiB0aGUgY29tbWVudCBmb3JtcyB0aGlzIGF0dHJpYnV0ZSBpcyBuZWVkZWQgdG8gZ2l2ZSBn
bHhfZ3JhdmF0YXIgdGhlIGVtYWlsIGFkZHJlc3MgdG8gYmUgZW5jb2RlZC4gRXZlcnkgZW1h
aWwgY2FuIGJlIGdyYXZhdGFyIGVuY29kZWQuPC9wPgoKCTxoND5zaXplIChkZWZhdWx0OiA4
MCk8L2g0PgoKCTxwPjEgdG8gNTEyICYjODIxMTsgZGVmaW5lcyB0aGUgc2l6ZSBvZiB0aGUg
cmVzdWx0aW5nIGdyYXZhdGFyLCBpZiBvbW1pdGVkIGl0IHdpbGwgYmUgODBweC4gQWxsIGdy
YXZhdGFycyBhcmUgc3F1YXJlZC48L3A+CgoJPGg0PmRlZmF1bHQgKGRlZmF1bHQ6IGdyYXZh
dGFyLWxvZ28pPC9oND4KCgk8cD5kZWZpbmUgd2hpY2ggaW1hZ2UocykgdG8gZGlzcGxheSB3
aGVuIG5vIGVtYWlsIGFkZHJlc3MgaXMgYXZhaWxhYmxlLiBJZiB0aGlzIGF0dHJpYnV0ZSBp
cyBtaXNzaW5nIGdyYXZhdGFyLmNvbSYjODIxNztzIHdoaXRlIEcgb24gYmx1ZSBncm91bmQg
d2lsbCBiZSBkaXNwbGF5ZWQuIElmIHlvdSBzdXBwbHkgdGhlIHVybCBvZiBhbiBpbWFnZSBo
ZXJlIGl0IHdpbGwgYmUgdXNlZC4gRnVydGhlciBpdCBpcyBwb3NzaWJsZSB0byB1c2UgZ3Jh
dmF0YXIuY29tJiM4MjE3O3MgaW50ZWdyYXRvbiBpY29ucyBiYXNlZCBvbiB0aGUgc3VibWl0
dGVkIGVtYWlsIGFkZHJlc3M6PC9wPgoKCTx1bD4KCQk8bGk+NDA0OiBkbyBub3QgbG9hZCBh
bnkgaW1hZ2UgaWYgbm9uZSBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIGVtYWlsIGhhc2gsIGlu
c3RlYWQgcmV0dXJuIGFuIDxzcGFuIGNsYXNzPSJjYXBzIj48c3BhbiBjbGFzcz0iY2FwcyI+
SFRUUDwvc3Bhbj48L3NwYW4+IDQwNCAoRmlsZSBOb3QgRm91bmQpIHJlc3BvbnNlPC9saT4K
CQk8bGk+bW06IChteXN0ZXJ5LW1hbikgYSBzaW1wbGUsIGNhcnRvb24tc3R5bGUgc2lsaG91
ZXR0ZWQgb3V0bGluZSBvZiBhIHBlcnNvbiAoZG9lcyBub3QgdmFyeSBieSBlbWFpbCBoYXNo
KTwvbGk+CgkJPGxpPmlkZW50aWNvbjogYSBnZW9tZXRyaWMgcGF0dGVybiBiYXNlZCBvbiBh
biBlbWFpbCBoYXNoPC9saT4KCQk8bGk+bW9uc3RlcmlkOiBhIGdlbmVyYXRlZCAmIzgyMTY7
bW9uc3RlciYjODIxNzsgd2l0aCBkaWZmZXJlbnQgY29sb3JzLCBmYWNlcywgZXRjPC9saT4K
CQk8bGk+d2F2YXRhcjogZ2VuZXJhdGVkIGZhY2VzIHdpdGggZGlmZmVyaW5nIGZlYXR1cmVz
IGFuZCBiYWNrZ3JvdW5kczwvbGk+CgkJPGxpPnJldHJvOiBhd2Vzb21lIGdlbmVyYXRlZCwg
OC1iaXQgYXJjYWRlLXN0eWxlIHBpeGVsYXRlZCBmYWNlczwvbGk+Cgk8L3VsPgoKCTxoND5y
YXRpbmcgKGRlZmF1bHQ6IGcpPC9oND4KCgk8cD5kZWZpbmVzIHRoZSByYXRpbmcgZm9yIHRo
ZSBncmF2YXRhci48L3A+CgoJPHVsPgoJCTxsaT5nOiBzdWl0YWJsZSBmb3IgZGlzcGxheSBv
biBhbGwgd2Vic2l0ZXMgd2l0aCBhbnkgYXVkaWVuY2UgdHlwZS48L2xpPgoJCTxsaT5wZzog
bWF5IGNvbnRhaW4gcnVkZSBnZXN0dXJlcywgcHJvdm9jYXRpdmVseSBkcmVzc2VkIGluZGl2
aWR1YWxzLCB0aGUgbGVzc2VyIHN3ZWFyIHdvcmRzLCBvciBtaWxkIHZpb2xlbmNlLjwvbGk+
CgkJPGxpPnI6IG1heSBjb250YWluIHN1Y2ggdGhpbmdzIGFzIGhhcnNoIHByb2Zhbml0eSwg
aW50ZW5zZSB2aW9sZW5jZSwgbnVkaXR5LCBvciBoYXJkIGRydWcgdXNlLjwvbGk+CgkJPGxp
Png6IG1heSBjb250YWluIGhhcmRjb3JlIHNleHVhbCBpbWFnZXJ5IG9yIGV4dHJlbWVseSBk
aXN0dXJiaW5nIHZpb2xlbmNlLjwvbGk+Cgk8L3VsPgoKCTxoND5pbWFnZSAoZGVmYXVsdDog
MSk8L2g0PgoKCTx1bD4KCQk8bGk+MTogcmV0dXJucyB0aGUgaW1hZ2UgdGFnIG9mIHRoZSBn
cmF2YXRhcjwvbGk+CgkJPGxpPjA6IHJldHVybnMgdGhlIHVybCBvZiB0aGUgZ3JhdmF0YXI8
L2xpPgoJPC91bD4KCgk8aDQ+Y2xhc3MgKGRlZmF1bHQ6IGdyYXZhdGFyKTwvaDQ+CgoJPHA+
Y29udGVudCBvZiB0aGUgY2xhc3MtYXR0cmlidXRlIG9mIHRoZSBpbWFnZSB0YWcuPC9wPgoK
CTxoND5hbHQgKGRlZmF1bHQ6IGVtcHR5KTwvaDQ+CgoJPHA+Y29udGVudCBvZiB0aGUgYWx0
LWF0dHJpYnV0ZSBvZiB0aGUgaW1hZ2UgdGFnLjwvcD4KCgk8aDI+RXhhbXBsZXM8L2gyPgoK
PHByZT48Y29kZT4mbHQ7dHhwOmdseF9ncmF2YXRhciAvJmd0OzsKPC9jb2RlPjwvcHJlPgoK
PHByZT48Y29kZT4mbHQ7dHhwOmdseF9ncmF2YXRhciBzaXplPSZxdW90OzYwJnF1b3Q7IGRl
ZmF1bHQ9JnF1b3Q7aHR0cDovL3d3dy5leGFtcGxlLmNvbS9pbWFnZXMvZ3JhdmF0YXIucG5n
JnF1b3Q7IGNsYXNzPSZxdW90O2dyYXZhdGFyJnF1b3Q7IC8mZ3Q7Owo8L2NvZGU+PC9wcmU+
CgoJPHA+dXNlZCBpbiB0aGUgZm9ybSBjb21tZW50cyBpdCB3aWxsIHNob3cgdGhlIGdyYXZh
dGFyIG9mIHRoZSBjdXJyZW50IGNvbW1lbnRhdG9yPC9wPgoKPHByZT48Y29kZT4mbHQ7dHhw
OmdseF9ncmF2YXRhciBlbWFpbD0mcXVvdDthZGRyZXNzQGV4YW1wbGUuY29tJnF1b3Q7OyAv
Jmd0Owo8L2NvZGU+PC9wcmU+CgoJPHA+c2hvd3MgdGhlIGdyYXZhdGFyIGZvciBhZGRyZXNz
QGV4YW1wbGUuY29tLjwvcD4KCjxwcmU+PGNvZGU+Jmx0O3R4cDpnbHhfZ3JhdmF0YXIgZW1h
aWw9JiMzOTsmbHQ7dHhwOmdob19hdXRob3JfZW1haWwvJmd0OyYjMzk7LyZndDsKPC9jb2Rl
PjwvcHJlPgoKCTxwPlNob3dzIHRoZSBncmF2YXRhciBmb3IgdGhlIGF1dGhvciBvZiB0aGUg
Y3VycmVudCBhcnRpY2xlLjwvcD4KCgk8aDM+UmVsZWFzZSBIaXN0b3J5PC9oMz4KCgk8cD5W
ZXJzaW9uIDEuMCAmIzgyMTE7IFNlcHRlbWJlciAxNXRoLCAyMDE0PC9wPgoKCTx1bD4KCQk8
bGk+SW5pdGlhbCBSZWxlYXNlPC9saT4KCTwvdWw+IjtzOjM6Im1kNSI7czozMjoiMDkzYmY3
NTQ3ZmJlM2YyNzY4NTE4MzE2MzUzNjE2ZmQiO30=
