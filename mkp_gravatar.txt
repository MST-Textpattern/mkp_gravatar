# Name: mkp_gravatar v1.0 
# Type: Public plugin
# Yet Another Textpattern Gravatar Plugin
# Author: Michael K Pate
# URL: https://github.com/michaelkpate/mkp_gravatar
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjEyOiJta3BfZ3JhdmF0YXIiO3M6NjoiYXV0aG9yIjtzOjE0
OiJNaWNoYWVsIEsgUGF0ZSI7czoxMDoiYXV0aG9yX3VyaSI7czo0NDoiaHR0cHM6Ly9naXRo
dWIuY29tL21pY2hhZWxrcGF0ZS9ta3BfZ3JhdmF0YXIiO3M6NzoidmVyc2lvbiI7czozOiIx
LjAiO3M6MTE6ImRlc2NyaXB0aW9uIjtzOjM5OiJZZXQgQW5vdGhlciBUZXh0cGF0dGVybiBH
cmF2YXRhciBQbHVnaW4iO3M6NDoiY29kZSI7czo4MTU6IglmdW5jdGlvbiBta3BfZ3JhdmF0
YXIoJGF0dHMpCgl7CgkKCQlnbG9iYWwgJHRoaXNjb21tZW50OwoJCgkJZXh0cmFjdChsQXR0
cyhhcnJheSgKCQkJJ2VtYWlsJyAgID0+ICcnLAkKCQkJJ3NpemUnICAgPT4gJzgwJywKCQkJ
J2RlZmF1bHQnICAgPT4gJycsCgkJCSdyYXRpbmcnICAgPT4gJ2cnLAoJCQknc2VjdXJlJyAg
ID0+ICcwJywJCgkJCSdpbWFnZScgICA9PiAnMScsCQoJCQknY2xhc3MnICAgPT4gJycsCQkK
CQkJJ2FsdCcgID0+ICcnCgkJKSwkYXR0cykpOwoJCQoJCSRodHRwID0gKCRzZWN1cmU9PScx
JykgPyAnaHR0cHM6Ly8nIDogJ2h0dHA6Ly8nOwoJCQoJCSRlbWFpbCAJPSAoIWVtcHR5KCRl
bWFpbCkpID8gbWQ1KHN0cnRvbG93ZXIodHJpbShwYXJzZSgkZW1haWwpKSkpIDogbWQ1KHN0
cnRvbG93ZXIodHJpbSgkdGhpc2NvbW1lbnRbJ2VtYWlsJ10pKSk7CiAKCQkkdXJsID0gJGh0
dHAuJ3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLyc7CgkJJHVybCAuPSAkZW1haWw7CgkJJHVy
bCAuPSAnP3M9Jy4kc2l6ZTsKCQkkdXJsIC49ICcmZD0nLiRkZWZhdWx0OwoJCSR1cmwgLj0g
JyZyPScuJHJhdGluZzsKCQkKCQlpZiAoaXNzZXQoJGltYWdlKSkgewoJCQkkdXJsID0gJzxp
bWcgc3JjPSInIC4gJHVybCAuICciICc7CgkJCWlmICghZW1wdHkoJGNsYXNzKSkgewkJCgkJ
CQkkdXJsIC49ICdjbGFzcz0iJyAuICRjbGFzcyAuICciICc7CgkJCX0KCQkJaWYgKCFlbXB0
eSgkYWx0KSkgewkJCgkJCQkkdXJsIC49ICdhbHQ9IicgLiAkYWx0IC4gJyIgJzsKCQkJfQoJ
CQkkdXJsIC49ICcvPic7CgkJfQogCgkJcmV0dXJuICR1cmw7Cgl9IjtzOjQ6InR5cGUiO3M6
MToiMCI7czo1OiJvcmRlciI7czoxOiI1IjtzOjU6ImZsYWdzIjtzOjE6IjAiO3M6NDoiaGVs
cCI7czo0MzMxOiIJPGgxPm1rcF9ncmF2YXRhcjwvaDE+CgoJPHA+VGhpcyB0YWcgcmV0dXJu
cyBhbiBpbWFnZSB0YWcgb3IgYW4gdXJsIHdpdGggdGhlIGdyYXZhdGFyIGZvciB0aGUgZW1h
aWwgYWRkcmVzcyBvZiB0aGUgY3VycmVudCBjb21tZW50IG9yIGFueSBnaXZlbiBlbWFpbCBh
ZGRyZXNzLjwvcD4KCgk8aDI+QWNrbm93bGVkZ2VtZW50czwvaDI+CgoJPHA+UHJldmlvdXNs
eSwgdGhlcmUgaGF2ZSBiZWVuIHR3byBvdGhlciBHcmF2YXRhciBwbHVnaW5zIGZvciBUZXh0
cGF0dGVybiBidXQgYm90aCBhcmUgY3VycmVudGx5IGluIG9ycGhhbiBzdGF0dXMuIEkgc3Rh
cnRlZCB0aGlzIG9uZSBmcm9tIHNjcmF0Y2ggdXNpbmcgPGEgaHJlZj0iaHR0cHM6Ly9lbi5n
cmF2YXRhci5jb20vc2l0ZS9pbXBsZW1lbnQvaW1hZ2VzL3BocC8iPjxzcGFuIGNsYXNzPSJj
YXBzIj5QSFA8L3NwYW4+IEltYWdlIFJlcXVlc3RzPC9hPiBmcm9tIHRoZSBHcmF2YXRhciBE
ZXZlbG9wZXIgUmVzb3VyY2VzLiBCdXQgSSBhbHNvIGxvb2tlZCBhdCBnbHhfZ3JhdmF0YXIg
Zm9yIGltcGxlbWVudGF0aW9uIGlkZWFzIChhbmQgdGhlIGZvcm1hdCBvZiB0aGlzIGhlbHAg
ZG9jdW1lbnQpLjwvcD4KCgk8aDI+TGlua3M8L2gyPgoKCTx1bD4KCQk8bGk+PGEgaHJlZj0i
aHR0cHM6Ly9naXRodWIuY29tL21pY2hhZWxrcGF0ZS9ta3BfZ3JhdmF0YXIiPkdpdGh1YiBD
b2RlIFJlcG9zaXRvcnk8L2E+PC9saT4KCQk8bGk+PGEgaHJlZj0iaHR0cHM6Ly9yYXcuZ2l0
aHVidXNlcmNvbnRlbnQuY29tL21pY2hhZWxrcGF0ZS9ta3BfZ3JhdmF0YXIvbWFzdGVyL21r
cF9ncmF2YXRhci50eHQiPkRvd25sb2FkPC9hPjwvbGk+Cgk8L3VsPgoKCTxoMj5ta3BfZ3Jh
dmF0YXI8L2gyPgoKCTxwPkp1c3QgdXNlICZsdDt0eHA6bWtwX2dyYXZhdGFyIC8mZ3Q7IHdo
ZXJlIGV2ZXIgeW91IG5lZWQgYSBncmF2YXRhciB0byBiZSBkaXNwbGF5ZWQuIElmIHlvdSBw
dXQgdGhpcyB0YWcgaW50byBhIGNvbW1lbnQgZm9ybSB0aGUgZ3JhdmF0YXIgd2lsbCBiZSBj
b25zdHJ1Y3RlZCB1c2luZyB0aGUgZW1haWwgYWRkcmVzcyBnaXZlbiBieSB0aGUgY3VycmVu
dCBjb21tZW50LiBJZiB5b3UgcHV0IHRoaXMgdGFnIGFueXdoZXJlIGVsc2UgKHdoZXJlIG1r
cF9ncmF2YXRhciBoYXMgbm8gYWNjZXNzIHRvIGEgY29tbWVudCBlbWFpbCBhZGRyZXNzKSB5
b3UgY2FuIHN1cHBseSBhbiBlbWFpbCBhZGRyZXNzIGJ5IHRoZSBhdHRyaWJ1dGUgZW1haWwg
dG8gY3JlYXRlIHRoZSBhY2NvbXBhbnlpbmcgZ3JhdmF0YXIuPC9wPjwvcD4KCgk8aDM+QXR0
cmlidXRlczwvaDM+CgoJPGg0PmVtYWlsIChkZWZhdWx0OiBlbXB0eS9lbWFpbCBhZGRyZXNz
IG9mIGN1cnJlbnQgY29tbWVudGF0b3IpPC9oND48L2g0PgoKCTxwPlVzZWQgaW5zaWRlIGEg
Y29tbWVudCBmb3JtIHRoZSBwbHVnaW4gd2lsbCBjaG9vc2UgdGhlIGN1cnJlbnQgY29tbWVu
dGVycyBlbWFpbCBhZGRyZXNzLiBJZiB5b3UgdXNlIHRoaXMgdGFnIG91dHNpZGUgb2YgdGhl
IGNvbW1lbnQgZm9ybXMgdGhpcyBhdHRyaWJ1dGUgaXMgbmVlZGVkIHRvIGdpdmUgZ2x4X2dy
YXZhdGFyIHRoZSBlbWFpbCBhZGRyZXNzIHRvIGJlIGVuY29kZWQuIEV2ZXJ5IGVtYWlsIGNh
biBiZSBncmF2YXRhciBlbmNvZGVkLjwvcD4KCgk8aDQ+c2l6ZSAoZGVmYXVsdDogODApPC9o
ND4KCgk8cD4xIHRvIDUxMiAmIzgyMTE7IGRlZmluZXMgdGhlIHNpemUgb2YgdGhlIHJlc3Vs
dGluZyBncmF2YXRhciwgaWYgb21taXRlZCBpdCB3aWxsIGJlIDgwcHguIEFsbCBncmF2YXRh
cnMgYXJlIHNxdWFyZWQuPC9wPgoKCTxoND5kZWZhdWx0IChkZWZhdWx0OiBncmF2YXRhci1s
b2dvKTwvaDQ+CgoJPHA+ZGVmaW5lIHdoaWNoIGltYWdlKHMpIHRvIGRpc3BsYXkgd2hlbiBu
byBlbWFpbCBhZGRyZXNzIGlzIGF2YWlsYWJsZS4gSWYgdGhpcyBhdHRyaWJ1dGUgaXMgbWlz
c2luZyBncmF2YXRhci5jb20mIzgyMTc7cyB3aGl0ZSBHIG9uIGJsdWUgZ3JvdW5kIHdpbGwg
YmUgZGlzcGxheWVkLiBJZiB5b3Ugc3VwcGx5IHRoZSB1cmwgb2YgYW4gaW1hZ2UgaGVyZSBp
dCB3aWxsIGJlIHVzZWQuIEZ1cnRoZXIgaXQgaXMgcG9zc2libGUgdG8gdXNlIGdyYXZhdGFy
LmNvbSYjODIxNztzIGludGVncmF0b24gaWNvbnMgYmFzZWQgb24gdGhlIHN1Ym1pdHRlZCBl
bWFpbCBhZGRyZXNzOjwvcD4KCgk8dWw+CgkJPGxpPjQwNDogZG8gbm90IGxvYWQgYW55IGlt
YWdlIGlmIG5vbmUgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbWFpbCBoYXNoLCBpbnN0ZWFk
IHJldHVybiBhbiA8c3BhbiBjbGFzcz0iY2FwcyI+PHNwYW4gY2xhc3M9ImNhcHMiPkhUVFA8
L3NwYW4+PC9zcGFuPiA0MDQgKEZpbGUgTm90IEZvdW5kKSByZXNwb25zZTwvbGk+CgkJPGxp
Pm1tOiAobXlzdGVyeS1tYW4pIGEgc2ltcGxlLCBjYXJ0b29uLXN0eWxlIHNpbGhvdWV0dGVk
IG91dGxpbmUgb2YgYSBwZXJzb24gKGRvZXMgbm90IHZhcnkgYnkgZW1haWwgaGFzaCk8L2xp
PgoJCTxsaT5pZGVudGljb246IGEgZ2VvbWV0cmljIHBhdHRlcm4gYmFzZWQgb24gYW4gZW1h
aWwgaGFzaDwvbGk+CgkJPGxpPm1vbnN0ZXJpZDogYSBnZW5lcmF0ZWQgJiM4MjE2O21vbnN0
ZXImIzgyMTc7IHdpdGggZGlmZmVyZW50IGNvbG9ycywgZmFjZXMsIGV0YzwvbGk+CgkJPGxp
PndhdmF0YXI6IGdlbmVyYXRlZCBmYWNlcyB3aXRoIGRpZmZlcmluZyBmZWF0dXJlcyBhbmQg
YmFja2dyb3VuZHM8L2xpPgoJCTxsaT5yZXRybzogYXdlc29tZSBnZW5lcmF0ZWQsIDgtYml0
IGFyY2FkZS1zdHlsZSBwaXhlbGF0ZWQgZmFjZXM8L2xpPgoJPC91bD4KCgk8aDQ+cmF0aW5n
IChkZWZhdWx0OiBnKTwvaDQ+CgoJPHA+ZGVmaW5lcyB0aGUgcmF0aW5nIGZvciB0aGUgZ3Jh
dmF0YXIuPC9wPgoKCTx1bD4KCQk8bGk+Zzogc3VpdGFibGUgZm9yIGRpc3BsYXkgb24gYWxs
IHdlYnNpdGVzIHdpdGggYW55IGF1ZGllbmNlIHR5cGUuPC9saT4KCQk8bGk+cGc6IG1heSBj
b250YWluIHJ1ZGUgZ2VzdHVyZXMsIHByb3ZvY2F0aXZlbHkgZHJlc3NlZCBpbmRpdmlkdWFs
cywgdGhlIGxlc3NlciBzd2VhciB3b3Jkcywgb3IgbWlsZCB2aW9sZW5jZS48L2xpPgoJCTxs
aT5yOiBtYXkgY29udGFpbiBzdWNoIHRoaW5ncyBhcyBoYXJzaCBwcm9mYW5pdHksIGludGVu
c2UgdmlvbGVuY2UsIG51ZGl0eSwgb3IgaGFyZCBkcnVnIHVzZS48L2xpPgoJCTxsaT54OiBt
YXkgY29udGFpbiBoYXJkY29yZSBzZXh1YWwgaW1hZ2VyeSBvciBleHRyZW1lbHkgZGlzdHVy
YmluZyB2aW9sZW5jZS48L2xpPgoJPC91bD4KCgk8aDQ+aW1hZ2UgKGRlZmF1bHQ6IDEpPC9o
ND4KCgk8dWw+CgkJPGxpPjE6IHJldHVybnMgdGhlIGltYWdlIHRhZyBvZiB0aGUgZ3JhdmF0
YXI8L2xpPgoJCTxsaT4wOiByZXR1cm5zIHRoZSB1cmwgb2YgdGhlIGdyYXZhdGFyPC9saT4K
CTwvdWw+CgoJPGg0PmNsYXNzIChkZWZhdWx0OiBlbXB0eSk8L2g0PgoKCTxwPmNvbnRlbnQg
b2YgdGhlIGNsYXNzLWF0dHJpYnV0ZSBvZiB0aGUgaW1hZ2UgdGFnLjwvcD4KCgk8aDQ+YWx0
IChkZWZhdWx0OiBlbXB0eSk8L2g0PgoKCTxwPmNvbnRlbnQgb2YgdGhlIGFsdC1hdHRyaWJ1
dGUgb2YgdGhlIGltYWdlIHRhZy48L3A+CgoJPGgyPkV4YW1wbGVzPC9oMj4KCjxwcmU+PGNv
ZGU+Jmx0O3R4cDpnbHhfZ3JhdmF0YXIgLyZndDs7CjwvY29kZT48L3ByZT4KCjxwcmU+PGNv
ZGU+Jmx0O3R4cDpnbHhfZ3JhdmF0YXIgc2l6ZT0mcXVvdDs2MCZxdW90OyBkZWZhdWx0PSZx
dW90O2h0dHA6Ly93d3cuZXhhbXBsZS5jb20vaW1hZ2VzL2dyYXZhdGFyLnBuZyZxdW90OyBj
bGFzcz0mcXVvdDtncmF2YXRhciZxdW90OyAvJmd0OzsKPC9jb2RlPjwvcHJlPgoKCTxwPnVz
ZWQgaW4gdGhlIGZvcm0gY29tbWVudHMgaXQgd2lsbCBzaG93IHRoZSBncmF2YXRhciBvZiB0
aGUgY3VycmVudCBjb21tZW50YXRvcjwvcD4KCjxwcmU+PGNvZGU+Jmx0O3R4cDpnbHhfZ3Jh
dmF0YXIgZW1haWw9JnF1b3Q7YWRkcmVzc0BleGFtcGxlLmNvbSZxdW90OzsgLyZndDsKPC9j
b2RlPjwvcHJlPgoKCTxwPnNob3dzIHRoZSBncmF2YXRhciBmb3IgYWRkcmVzc0BleGFtcGxl
LmNvbS48L3A+Cgo8cHJlPjxjb2RlPiZsdDt0eHA6Z2x4X2dyYXZhdGFyIGVtYWlsPSYjMzk7
Jmx0O3R4cDpnaG9fYXV0aG9yX2VtYWlsLyZndDsmIzM5Oy8mZ3Q7CjwvY29kZT48L3ByZT4K
Cgk8cD5TaG93cyB0aGUgZ3JhdmF0YXIgZm9yIHRoZSBhdXRob3Igb2YgdGhlIGN1cnJlbnQg
YXJ0aWNsZS48L3A+CgoJPGgzPlJlbGVhc2UgSGlzdG9yeTwvaDM+CgoJPHA+VmVyc2lvbiAx
LjAgJiM4MjExOyBTZXB0ZW1iZXIgMTV0aCwgMjAxNDwvcD4KCgk8dWw+CgkJPGxpPkluaXRp
YWwgUmVsZWFzZTwvbGk+Cgk8L3VsPiI7czozOiJtZDUiO3M6MzI6ImMyMmNjNGU2NTBhNTQ1
YmUyMDU5NmFjZGE0M2M0YjJhIjt9
