# Name: mkp_gravatar v1.0 
# Type: Public plugin
# Yet Another Textpattern Gravatar Plugin
# Author: Michael K Pate
# URL: https://github.com/michaelkpate/mkp_gravatar
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjEyOiJta3BfZ3JhdmF0YXIiO3M6NjoiYXV0aG9yIjtzOjE0
OiJNaWNoYWVsIEsgUGF0ZSI7czoxMDoiYXV0aG9yX3VyaSI7czo0NDoiaHR0cHM6Ly9naXRo
dWIuY29tL21pY2hhZWxrcGF0ZS9ta3BfZ3JhdmF0YXIiO3M6NzoidmVyc2lvbiI7czozOiIx
LjAiO3M6MTE6ImRlc2NyaXB0aW9uIjtzOjM5OiJZZXQgQW5vdGhlciBUZXh0cGF0dGVybiBH
cmF2YXRhciBQbHVnaW4iO3M6NDoiY29kZSI7czoxMTcyOiIJZnVuY3Rpb24gbWtwX2dyYXZh
dGFyKCRhdHRzKQ0KCXsNCgkNCgkJZ2xvYmFsICR0aGlzY29tbWVudDsNCgkNCgkJZXh0cmFj
dChsQXR0cyhhcnJheSgNCgkJCSdlbWFpbCcgICA9PiAnJywJDQoJCQknc2l6ZScgICA9PiAn
ODAnLA0KCQkJJ3JhdGluZycgICA9PiAnZycsDQoJCQknZGVmYXVsdCcgICA9PiAnJywNCgkJ
CSdmb3JjZScgICA9PiAnJywNCgkJCSdzZWN1cmUnICAgPT4gJzAnLAkNCgkJCSdpbWFnZScg
ICA9PiAnMScsCQ0KCQkJJ2NsYXNzJyAgID0+ICcnLAkJDQoJCQknYWx0JyAgPT4gJycsDQoJ
CQknZGlzYWJsZScgID0+ICcnLA0KCQkpLCRhdHRzKSk7DQoJCQ0KCQkkaHR0cCA9ICgkc2Vj
dXJlPT0nMScgfHwgJHNlY3VyZT09J3knIHx8ICRzZWN1cmU9PSd0cnVlJykgPyAnaHR0cHM6
Ly8nIDogJ2h0dHA6Ly8nOw0KCQkNCgkJJGVtYWlsIAk9ICghZW1wdHkoJGVtYWlsKSkgPyBt
ZDUoc3RydG9sb3dlcih0cmltKHBhcnNlKCRlbWFpbCkpKSkgOiBtZDUoc3RydG9sb3dlcih0
cmltKCR0aGlzY29tbWVudFsnZW1haWwnXSkpKTsNCiANCgkJJHVybCA9ICRodHRwLid3d3cu
Z3JhdmF0YXIuY29tL2F2YXRhci8nOw0KCQkkdXJsIC49ICRlbWFpbDsNCgkJJHVybCAuPSAn
P3M9Jy4kc2l6ZTsNCgkJJHVybCAuPSAnJnI9Jy4kcmF0aW5nOw0KDQoJCWlmICghZW1wdHko
JGRlZmF1bHQpKSB7DQoJCQkkdXJsIC49ICcmZD0nLiRkZWZhdWx0Ow0KCQkJJGZvcmNlID0g
KCRmb3JjZT09JzEnIHx8ICRmb3JjZT09J3knIHx8ICRmb3JjZT09J3RydWUnKSA/ICcmZj15
JyA6ICcnOw0KCQkJJHVybCAuPSAkZm9yY2U7DQoJCX0NCgkJDQoJCWlmICgkaW1hZ2U9PScx
JyB8fCAkaW1hZ2U9PSd5JyB8fCAkc2VjdXJlPT0ndHJ1ZScpIHsNCgkJCSR1cmwgPSAnPGlt
ZyBzcmM9IicgLiAkdXJsIC4gJyIgJzsNCgkJCWlmICghZW1wdHkoJGNsYXNzKSkgewkJDQoJ
CQkJJHVybCAuPSAnY2xhc3M9IicgLiAkY2xhc3MgLiAnIiAnOw0KCQkJfQ0KCQkJaWYgKCFl
bXB0eSgkYWx0KSkgewkJDQoJCQkJJHVybCAuPSAnYWx0PSInIC4gJGFsdCAuICciICc7DQoJ
CQl9DQoJCQkkdXJsIC49ICcvPic7DQoJCX0NCg0KCQkkdXJsID0gKCRkaXNhYmxlPT0nMScg
fHwgJGRpc2FibGU9PSd5JyB8fCAkZGlzYWJsZT09J3RydWUnKSA/ICcnIDogJHVybDsNCiAN
CgkJcmV0dXJuICR1cmw7DQoJfSI7czo0OiJ0eXBlIjtzOjE6IjAiO3M6NToib3JkZXIiO3M6
MToiNSI7czo1OiJmbGFncyI7czoxOiIwIjtzOjQ6ImhlbHAiO3M6NDc4NjoiCTxoMT5ta3Bf
Z3JhdmF0YXI8L2gxPgoKCTxwPlRoaXMgdGFnIHJldHVybnMgYW4gaW1hZ2UgdGFnIG9yIGFu
IDxzcGFuIGNsYXNzPSJjYXBzIj5VUkw8L3NwYW4+IHdpdGggdGhlIEdyYXZhdGFyIGZvciB0
aGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgY3VycmVudCBjb21tZW50IG9yIGFueSBnaXZlbiBl
bWFpbCBhZGRyZXNzLjwvcD4KCgk8cD5Gcm9tIHRoZSBHcmF2YXRhciBTaXRlOiBBbiAmIzgy
MjA7YXZhdGFyJiM4MjIxOyBpcyBhbiBpbWFnZSB0aGF0IHJlcHJlc2VudHMgeW91IG9ubGlu
ZeKAlGEgbGl0dGxlIHBpY3R1cmUgdGhhdCBhcHBlYXJzIG5leHQgdG8geW91ciBuYW1lIHdo
ZW4geW91IGludGVyYWN0IHdpdGggd2Vic2l0ZXMuIEEgR3JhdmF0YXIgaXMgYSBHbG9iYWxs
eSBSZWNvZ25pemVkIEF2YXRhci4gWW91IHVwbG9hZCBpdCBhbmQgY3JlYXRlIHlvdXIgcHJv
ZmlsZSBqdXN0IG9uY2UsIGFuZCB0aGVuIHdoZW4geW91IHBhcnRpY2lwYXRlIGluIGFueSBH
cmF2YXRhci1lbmFibGVkIHNpdGUsIHlvdXIgR3JhdmF0YXIgaW1hZ2Ugd2lsbCBhdXRvbWF0
aWNhbGx5IGZvbGxvdyB5b3UgdGhlcmUuPC9wPgoKCTxoMj5BY2tub3dsZWRnZW1lbnRzPC9o
Mj4KCgk8cD5QcmV2aW91c2x5LCB0aGVyZSBoYXZlIGJlZW4gdHdvIG90aGVyIEdyYXZhdGFy
IHBsdWdpbnMgZm9yIFRleHRwYXR0ZXJuIGJ1dCBib3RoIGFyZSBjdXJyZW50bHkgaW4gb3Jw
aGFuIHN0YXR1cy4gSSBzdGFydGVkIHRoaXMgb25lIGZyb20gc2NyYXRjaCB1c2luZyA8YSBo
cmVmPSJodHRwczovL2VuLmdyYXZhdGFyLmNvbS9zaXRlL2ltcGxlbWVudC9pbWFnZXMvcGhw
LyI+PHNwYW4gY2xhc3M9ImNhcHMiPlBIUDwvc3Bhbj4gSW1hZ2UgUmVxdWVzdHM8L2E+IGZy
b20gdGhlIEdyYXZhdGFyIERldmVsb3BlciBSZXNvdXJjZXMgYXMgYSBHdWlkZS4gSSBhbHNv
IGxvb2tlZCBhdCB0aGUgY29kZSBvZiBnbHhfZ3JhdmF0YXIgZm9yIGltcGxlbWVudGF0aW9u
IGlkZWFzIChhbmQgdGhlIGZvcm1hdCBvZiB0aGlzIGhlbHAgZG9jdW1lbnQpLjwvcD4KCgk8
aDI+TGlua3M8L2gyPgoKCTx1bD4KCQk8bGk+PGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29t
L21pY2hhZWxrcGF0ZS9ta3BfZ3JhdmF0YXIiPkdpdGh1YiBDb2RlIFJlcG9zaXRvcnk8L2E+
PC9saT4KCQk8bGk+PGEgaHJlZj0iaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29t
L21pY2hhZWxrcGF0ZS9ta3BfZ3JhdmF0YXIvbWFzdGVyL21rcF9ncmF2YXRhci50eHQiPkRv
d25sb2FkPC9hPjwvbGk+Cgk8L3VsPgoKCTxoMj5ta3BfZ3JhdmF0YXI8L2gyPgoKCTxwPkp1
c3QgdXNlICZsdDt0eHA6bWtwX2dyYXZhdGFyIC8mZ3Q7IHdoZXJlIGV2ZXIgeW91IG5lZWQg
YSBHcmF2YXRhciB0byBiZSBkaXNwbGF5ZWQuIElmIHlvdSBwdXQgdGhpcyB0YWcgaW50byBh
IGNvbW1lbnQgZm9ybSB0aGUgR3JhdmF0YXIgd2lsbCBiZSBjb25zdHJ1Y3RlZCB1c2luZyB0
aGUgZW1haWwgYWRkcmVzcyBnaXZlbiBieSB0aGUgY3VycmVudCBjb21tZW50LiBJZiB5b3Ug
cHV0IHRoaXMgdGFnIGFueXdoZXJlIGVsc2UgKHdoZXJlIG1rcF9ncmF2YXRhciBoYXMgbm8g
YWNjZXNzIHRvIGEgY29tbWVudCBlbWFpbCBhZGRyZXNzKSB5b3UgY2FuIHN1cHBseSBhbiBl
bWFpbCBhZGRyZXNzIGJ5IHRoZSBhdHRyaWJ1dGUgZW1haWwgdG8gY3JlYXRlIHRoZSBhY2Nv
bXBhbnlpbmcgR3JhdmF0YXIuPC9wPjwvcD4KCgk8aDM+QXR0cmlidXRlczwvaDM+CgoJPGg0
PmVtYWlsIChkZWZhdWx0OiBlbXB0eS9lbWFpbCBhZGRyZXNzIG9mIGN1cnJlbnQgY29tbWVu
dGF0b3IpPC9oND4KCgk8cD5Vc2VkIGluc2lkZSBhIGNvbW1lbnQgZm9ybSB0aGUgcGx1Z2lu
IHdpbGwgY2hvb3NlIHRoZSBjdXJyZW50IGNvbW1lbnRlciYjODIxNztzIGVtYWlsIGFkZHJl
c3MuIElmIHlvdSB1c2UgdGhpcyB0YWcgb3V0c2lkZSBvZiB0aGUgY29tbWVudCBmb3JtcyB0
aGlzIGF0dHJpYnV0ZSBpcyBuZWVkZWQgdG8gZ2l2ZSBta3BfZ3JhdmF0YXIgdGhlIGVtYWls
IGFkZHJlc3MgdG8gYmUgZW5jb2RlZC4gQW55IGVtYWlsIGNhbiBiZSBHcmF2YXRhciBlbmNv
ZGVkLjwvcD4KCgk8aDQ+c2l6ZSAoZGVmYXVsdDogODApPC9oND4KCgk8cD5EZWZpbmVzIHRo
ZSBzaXplIG9mIHRoZSByZXN1bHRpbmcgR3JhdmF0YXIgKHJhbmdlOiAxIHRvIDUxMikuIEFs
bCBHcmF2YXRhcnMgYXJlIHNxdWFyZWQuPC9wPgoKCTxoND5yYXRpbmcgKGRlZmF1bHQ6IGcp
PC9oND4KCgk8cD5EZWZpbmVzIHRoZSByYXRpbmcgZm9yIHRoZSBHcmF2YXRhci48L3A+CgoJ
PHVsPgoJCTxsaT5nOiBzdWl0YWJsZSBmb3IgZGlzcGxheSBvbiBhbGwgd2Vic2l0ZXMgd2l0
aCBhbnkgYXVkaWVuY2UgdHlwZS48L2xpPgoJCTxsaT5wZzogbWF5IGNvbnRhaW4gcnVkZSBn
ZXN0dXJlcywgcHJvdm9jYXRpdmVseSBkcmVzc2VkIGluZGl2aWR1YWxzLCB0aGUgbGVzc2Vy
IHN3ZWFyIHdvcmRzLCBvciBtaWxkIHZpb2xlbmNlLjwvbGk+CgkJPGxpPnI6IG1heSBjb250
YWluIHN1Y2ggdGhpbmdzIGFzIGhhcnNoIHByb2Zhbml0eSwgaW50ZW5zZSB2aW9sZW5jZSwg
bnVkaXR5LCBvciBoYXJkIGRydWcgdXNlLjwvbGk+CgkJPGxpPng6IG1heSBjb250YWluIGhh
cmRjb3JlIHNleHVhbCBpbWFnZXJ5IG9yIGV4dHJlbWVseSBkaXN0dXJiaW5nIHZpb2xlbmNl
LjwvbGk+Cgk8L3VsPgoKCTxoND5kZWZhdWx0IChkZWZhdWx0OiBncmF2YXRhci1sb2dvKTwv
aDQ+CgoJPHA+RGVmaW5lIHdoaWNoIGltYWdlKHMpIHRvIGRpc3BsYXkgd2hlbiBhbiBlbWFp
bCBhZGRyZXNzIGhhcyBubyBHcmF2YXRhci4gSWYgdGhpcyBhdHRyaWJ1dGUgaXMgbWlzc2lu
ZyBncmF2YXRhci5jb20mIzgyMTc7cyB3aGl0ZSBHIG9uIGJsdWUgZ3JvdW5kIHdpbGwgYmUg
ZGlzcGxheWVkLiBJZiB5b3Ugc3VwcGx5IHRoZSA8c3BhbiBjbGFzcz0iY2FwcyI+PHNwYW4g
Y2xhc3M9ImNhcHMiPlVSTDwvc3Bhbj48L3NwYW4+b2YgYW4gaW1hZ2UgaGVyZSBpdCB3aWxs
IGJlIHVzZWQuIEZ1cnRoZXIgaXQgaXMgcG9zc2libGUgdG8gdXNlIGdyYXZhdGFyLmNvbSYj
ODIxNztzIGludGVncmF0aW9uIGljb25zIGJhc2VkIG9uIHRoZSBzdWJtaXR0ZWQgZW1haWwg
YWRkcmVzczo8L3A+CgoJPHVsPgoJCTxsaT40MDQ6IGRvIG5vdCBsb2FkIGFueSBpbWFnZSBp
ZiBub25lIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZW1haWwgaGFzaCwgaW5zdGVhZCByZXR1
cm4gYW4gPHNwYW4gY2xhc3M9ImNhcHMiPjxzcGFuIGNsYXNzPSJjYXBzIj5IVFRQPC9zcGFu
Pjwvc3Bhbj4gNDA0IChGaWxlIE5vdCBGb3VuZCkgcmVzcG9uc2U8L2xpPgoJCTxsaT5tbTog
KG15c3RlcnktbWFuKSBhIHNpbXBsZSwgY2FydG9vbi1zdHlsZSBzaWxob3VldHRlZCBvdXRs
aW5lIG9mIGEgcGVyc29uIChkb2VzIG5vdCB2YXJ5IGJ5IGVtYWlsIGhhc2gpPC9saT4KCQk8
bGk+aWRlbnRpY29uOiBhIGdlb21ldHJpYyBwYXR0ZXJuIGJhc2VkIG9uIGFuIGVtYWlsIGhh
c2g8L2xpPgoJCTxsaT5tb25zdGVyaWQ6IGEgZ2VuZXJhdGVkICYjODIxNjttb25zdGVyJiM4
MjE3OyB3aXRoIGRpZmZlcmVudCBjb2xvcnMsIGZhY2VzLCBldGM8L2xpPgoJCTxsaT53YXZh
dGFyOiBnZW5lcmF0ZWQgZmFjZXMgd2l0aCBkaWZmZXJpbmcgZmVhdHVyZXMgYW5kIGJhY2tn
cm91bmRzPC9saT4KCQk8bGk+cmV0cm86IGF3ZXNvbWUgZ2VuZXJhdGVkLCA4LWJpdCBhcmNh
ZGUtc3R5bGUgcGl4ZWxhdGVkIGZhY2VzPC9saT4KCTwvdWw+CgoJPGg0PmZvcmNlIChkZWZh
dWx0OiAwKTwvaDQ+CgoJPHVsPgoJCTxsaT4xOiBhbHdheXMgcmV0dXJucyB0aGUgZ3JhdmF0
YXIgaW4gdGhlIGZvcm0gY2hvc2VuIGFzIHRoZSBkZWZhdWx0LjwvbGk+CgkJPGxpPjA6IHJl
dHVybnMgdGhlIGdyYXZhdGFyIGFzIG5vcm1hbDwvbGk+Cgk8L3VsPgoKCTxoMz5JbWFnZSBh
bmQgUmVsYXRlZCBBdHRyaWJ1dGVzPC9oMz4KCgk8aDQ+aW1hZ2UgKGRlZmF1bHQ6IDEpPC9o
ND4KCgk8dWw+CgkJPGxpPjE6IHJldHVybnMgdGhlIGltYWdlIHRhZyBvZiB0aGUgZ3JhdmF0
YXI8L2xpPgoJCTxsaT4wOiByZXR1cm5zIHRoZSB1cmwgb2YgdGhlIGdyYXZhdGFyPC9saT4K
CTwvdWw+CgoJPGg0PmNsYXNzIChkZWZhdWx0OiBlbXB0eSk8L2g0PgoKCTxwPkNvbnRlbnQg
b2YgdGhlIGNsYXNzIGF0dHJpYnV0ZSBvZiB0aGUgaW1hZ2UgdGFnLjwvcD4KCgk8aDQ+YWx0
IChkZWZhdWx0OiBlbXB0eSk8L2g0PgoKCTxwPkNvbnRlbnQgb2YgdGhlIGFsdCBhdHRyaWJ1
dGUgb2YgdGhlIGltYWdlIHRhZy48L3A+CgoJPGgyPkV4YW1wbGVzPC9oMj4KCjxwcmU+PGNv
ZGU+Jmx0O3R4cDpta3BfZ3JhdmF0YXIgLyZndDs7CjwvY29kZT48L3ByZT4KCjxwcmU+PGNv
ZGU+Jmx0O3R4cDpta3BfZ3JhdmF0YXIgc2l6ZT0mcXVvdDs2MCZxdW90OyBkZWZhdWx0PSZx
dW90O2h0dHA6Ly93d3cuZXhhbXBsZS5jb20vaW1hZ2VzL2dyYXZhdGFyLnBuZyZxdW90OyBj
bGFzcz0mcXVvdDtncmF2YXRhciZxdW90OyAvJmd0OzsKPC9jb2RlPjwvcHJlPgoKCTxwPlVz
ZWQgaW4gdGhlIGZvcm0gY29tbWVudHMgaXQgd2lsbCBzaG93IHRoZSBHcmF2YXRhciBvZiB0
aGUgY3VycmVudCBjb21tZW50YXRvcjwvcD4KCjxwcmU+PGNvZGU+Jmx0O3R4cDpta3BfZ3Jh
dmF0YXIgZW1haWw9JnF1b3Q7YWRkcmVzc0BleGFtcGxlLmNvbSZxdW90OzsgLyZndDsKPC9j
b2RlPjwvcHJlPgoKCTxwPlNob3dzIHRoZSBHcmF2YXRhciBmb3IgYWRkcmVzc0BleGFtcGxl
LmNvbS48L3A+CgoJPGgzPlJlbGVhc2UgSGlzdG9yeTwvaDM+CgoJPHA+VmVyc2lvbiAxLjA6
IFNlcHRlbWJlciAxNXRoLCAyMDE0PC9wPiI7czozOiJtZDUiO3M6MzI6Ijg1MDdmMzdjMDQx
NGFkZjc4MTYxZWFkZDRhMjQ1ZDI3Ijt9
