# Name: mkp_gravatar v1.0 
# Type: Public plugin
# Yet Another Textpattern Gravatar Plugin
# Author: Michael K Pate
# URL: https://github.com/michaelkpate/mkp_gravatar
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjEyOiJta3BfZ3JhdmF0YXIiO3M6NjoiYXV0aG9yIjtzOjE0
OiJNaWNoYWVsIEsgUGF0ZSI7czoxMDoiYXV0aG9yX3VyaSI7czo0NDoiaHR0cHM6Ly9naXRo
dWIuY29tL21pY2hhZWxrcGF0ZS9ta3BfZ3JhdmF0YXIiO3M6NzoidmVyc2lvbiI7czozOiIx
LjAiO3M6MTE6ImRlc2NyaXB0aW9uIjtzOjM5OiJZZXQgQW5vdGhlciBUZXh0cGF0dGVybiBH
cmF2YXRhciBQbHVnaW4iO3M6NDoiY29kZSI7czo4MTQ6IglmdW5jdGlvbiBta3BfZ3JhdmF0
YXIoJGF0dHMpCgl7CgkKCQlnbG9iYWwgJHRoaXNjb21tZW50OwoJCgkJZXh0cmFjdChsQXR0
cyhhcnJheSgKCQkJJ2VtYWlsJyAgID0+ICcnLAkKCQkJJ3NpemUnICAgPT4gJzgwJywKCQkJ
J2RlZmF1bHQnICAgPT4gJycsCgkJCSdyYXRpbmcnICAgPT4gJ2cnLAoJCQknc2VjdXJlJyAg
ID0+ICcwJywJCgkJCSdpbWFnZScgICA9PiAnMScsCQoJCQknY2xhc3MnICAgPT4gJycsCQkK
CQkJJ2FsdCcgID0+ICcnCgkJKSwkYXR0cykpOwoJCQoJCSRodHRwID0gKCRzZWN1cmU9PScx
JykgPyAnaHR0cHM6Ly8nIDogJ2h0dHA6Ly8nOwoJCQoJCSRlbWFpbCAJPSAoIWVtcHR5KCRl
bWFpbCkpID8gbWQ1KHN0cnRvbG93ZXIodHJpbShwYXJzZSgkZW1haWwpKSkpIDogbWQ1KHN0
cnRvbG93ZXIodHJpbSgkdGhpc2NvbW1lbnRbJ2VtYWlsJ10pKSk7CiAKCQkkdXJsID0gJGh0
dHAuJ3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLyc7CgkJJHVybCAuPSAkZW1haWw7CgkJJHVy
bCAuPSAncz0nLiRzaXplOwoJCSR1cmwgLj0gJyZkPScuJGRlZmF1bHQ7CgkJJHVybCAuPSAn
JnI9Jy4kcmF0aW5nOwoJCQoJCWlmIChpc3NldCgkaW1hZ2UpKSB7CgkJCSR1cmwgPSAnPGlt
ZyBzcmM9IicgLiAkdXJsIC4gJyIgJzsKCQkJaWYgKCFlbXB0eSgkY2xhc3MpKSB7CQkKCQkJ
CSR1cmwgLj0gJ2NsYXNzPSInIC4gJGNsYXNzIC4gJyIgJzsKCQkJfQoJCQlpZiAoIWVtcHR5
KCRhbHQpKSB7CQkKCQkJCSR1cmwgLj0gJ2FsdD0iJyAuICRhbHQgLiAnIiAnOwoJCQl9CgkJ
CSR1cmwgLj0gJy8+JzsKCQl9CiAKCQlyZXR1cm4gJHVybDsKCX0iO3M6NDoidHlwZSI7czox
OiIwIjtzOjU6Im9yZGVyIjtzOjE6IjUiO3M6NToiZmxhZ3MiO3M6MToiMCI7czo0OiJoZWxw
IjtzOjQzMzE6Igk8aDE+bWtwX2dyYXZhdGFyPC9oMT4KCgk8cD5UaGlzIHRhZyByZXR1cm5z
IGFuIGltYWdlIHRhZyBvciBhbiB1cmwgd2l0aCB0aGUgZ3JhdmF0YXIgZm9yIHRoZSBlbWFp
bCBhZGRyZXNzIG9mIHRoZSBjdXJyZW50IGNvbW1lbnQgb3IgYW55IGdpdmVuIGVtYWlsIGFk
ZHJlc3MuPC9wPgoKCTxoMj5BY2tub3dsZWRnZW1lbnRzPC9oMj4KCgk8cD5QcmV2aW91c2x5
LCB0aGVyZSBoYXZlIGJlZW4gdHdvIG90aGVyIEdyYXZhdGFyIHBsdWdpbnMgZm9yIFRleHRw
YXR0ZXJuIGJ1dCBib3RoIGFyZSBjdXJyZW50bHkgaW4gb3JwaGFuIHN0YXR1cy4gSSBzdGFy
dGVkIHRoaXMgb25lIGZyb20gc2NyYXRjaCB1c2luZyA8YSBocmVmPSJodHRwczovL2VuLmdy
YXZhdGFyLmNvbS9zaXRlL2ltcGxlbWVudC9pbWFnZXMvcGhwLyI+PHNwYW4gY2xhc3M9ImNh
cHMiPlBIUDwvc3Bhbj4gSW1hZ2UgUmVxdWVzdHM8L2E+IGZyb20gdGhlIEdyYXZhdGFyIERl
dmVsb3BlciBSZXNvdXJjZXMuIEJ1dCBJIGFsc28gbG9va2VkIGF0IGdseF9ncmF2YXRhciBm
b3IgaW1wbGVtZW50YXRpb24gaWRlYXMgKGFuZCB0aGUgZm9ybWF0IG9mIHRoaXMgaGVscCBk
b2N1bWVudCkuPC9wPgoKCTxoMj5MaW5rczwvaDI+CgoJPHVsPgoJCTxsaT48YSBocmVmPSJo
dHRwczovL2dpdGh1Yi5jb20vbWljaGFlbGtwYXRlL21rcF9ncmF2YXRhciI+R2l0aHViIENv
ZGUgUmVwb3NpdG9yeTwvYT48L2xpPgoJCTxsaT48YSBocmVmPSJodHRwczovL3Jhdy5naXRo
dWJ1c2VyY29udGVudC5jb20vbWljaGFlbGtwYXRlL21rcF9ncmF2YXRhci9tYXN0ZXIvbWtw
X2dyYXZhdGFyLnR4dCI+RG93bmxvYWQ8L2E+PC9saT4KCTwvdWw+CgoJPGgyPm1rcF9ncmF2
YXRhcjwvaDI+CgoJPHA+SnVzdCB1c2UgJmx0O3R4cDpta3BfZ3JhdmF0YXIgLyZndDsgd2hl
cmUgZXZlciB5b3UgbmVlZCBhIGdyYXZhdGFyIHRvIGJlIGRpc3BsYXllZC4gSWYgeW91IHB1
dCB0aGlzIHRhZyBpbnRvIGEgY29tbWVudCBmb3JtIHRoZSBncmF2YXRhciB3aWxsIGJlIGNv
bnN0cnVjdGVkIHVzaW5nIHRoZSBlbWFpbCBhZGRyZXNzIGdpdmVuIGJ5IHRoZSBjdXJyZW50
IGNvbW1lbnQuIElmIHlvdSBwdXQgdGhpcyB0YWcgYW55d2hlcmUgZWxzZSAod2hlcmUgbWtw
X2dyYXZhdGFyIGhhcyBubyBhY2Nlc3MgdG8gYSBjb21tZW50IGVtYWlsIGFkZHJlc3MpIHlv
dSBjYW4gc3VwcGx5IGFuIGVtYWlsIGFkZHJlc3MgYnkgdGhlIGF0dHJpYnV0ZSBlbWFpbCB0
byBjcmVhdGUgdGhlIGFjY29tcGFueWluZyBncmF2YXRhci48L3A+PC9wPgoKCTxoMz5BdHRy
aWJ1dGVzPC9oMz4KCgk8aDQ+ZW1haWwgKGRlZmF1bHQ6IGVtcHR5L2VtYWlsIGFkZHJlc3Mg
b2YgY3VycmVudCBjb21tZW50YXRvcik8L2g0PjwvaDQ+CgoJPHA+VXNlZCBpbnNpZGUgYSBj
b21tZW50IGZvcm0gdGhlIHBsdWdpbiB3aWxsIGNob29zZSB0aGUgY3VycmVudCBjb21tZW50
ZXJzIGVtYWlsIGFkZHJlc3MuIElmIHlvdSB1c2UgdGhpcyB0YWcgb3V0c2lkZSBvZiB0aGUg
Y29tbWVudCBmb3JtcyB0aGlzIGF0dHJpYnV0ZSBpcyBuZWVkZWQgdG8gZ2l2ZSBnbHhfZ3Jh
dmF0YXIgdGhlIGVtYWlsIGFkZHJlc3MgdG8gYmUgZW5jb2RlZC4gRXZlcnkgZW1haWwgY2Fu
IGJlIGdyYXZhdGFyIGVuY29kZWQuPC9wPgoKCTxoND5zaXplIChkZWZhdWx0OiA4MCk8L2g0
PgoKCTxwPjEgdG8gNTEyICYjODIxMTsgZGVmaW5lcyB0aGUgc2l6ZSBvZiB0aGUgcmVzdWx0
aW5nIGdyYXZhdGFyLCBpZiBvbW1pdGVkIGl0IHdpbGwgYmUgODBweC4gQWxsIGdyYXZhdGFy
cyBhcmUgc3F1YXJlZC48L3A+CgoJPGg0PmRlZmF1bHQgKGRlZmF1bHQ6IGdyYXZhdGFyLWxv
Z28pPC9oND4KCgk8cD5kZWZpbmUgd2hpY2ggaW1hZ2UocykgdG8gZGlzcGxheSB3aGVuIG5v
IGVtYWlsIGFkZHJlc3MgaXMgYXZhaWxhYmxlLiBJZiB0aGlzIGF0dHJpYnV0ZSBpcyBtaXNz
aW5nIGdyYXZhdGFyLmNvbSYjODIxNztzIHdoaXRlIEcgb24gYmx1ZSBncm91bmQgd2lsbCBi
ZSBkaXNwbGF5ZWQuIElmIHlvdSBzdXBwbHkgdGhlIHVybCBvZiBhbiBpbWFnZSBoZXJlIGl0
IHdpbGwgYmUgdXNlZC4gRnVydGhlciBpdCBpcyBwb3NzaWJsZSB0byB1c2UgZ3JhdmF0YXIu
Y29tJiM4MjE3O3MgaW50ZWdyYXRvbiBpY29ucyBiYXNlZCBvbiB0aGUgc3VibWl0dGVkIGVt
YWlsIGFkZHJlc3M6PC9wPgoKCTx1bD4KCQk8bGk+NDA0OiBkbyBub3QgbG9hZCBhbnkgaW1h
Z2UgaWYgbm9uZSBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIGVtYWlsIGhhc2gsIGluc3RlYWQg
cmV0dXJuIGFuIDxzcGFuIGNsYXNzPSJjYXBzIj48c3BhbiBjbGFzcz0iY2FwcyI+SFRUUDwv
c3Bhbj48L3NwYW4+IDQwNCAoRmlsZSBOb3QgRm91bmQpIHJlc3BvbnNlPC9saT4KCQk8bGk+
bW06IChteXN0ZXJ5LW1hbikgYSBzaW1wbGUsIGNhcnRvb24tc3R5bGUgc2lsaG91ZXR0ZWQg
b3V0bGluZSBvZiBhIHBlcnNvbiAoZG9lcyBub3QgdmFyeSBieSBlbWFpbCBoYXNoKTwvbGk+
CgkJPGxpPmlkZW50aWNvbjogYSBnZW9tZXRyaWMgcGF0dGVybiBiYXNlZCBvbiBhbiBlbWFp
bCBoYXNoPC9saT4KCQk8bGk+bW9uc3RlcmlkOiBhIGdlbmVyYXRlZCAmIzgyMTY7bW9uc3Rl
ciYjODIxNzsgd2l0aCBkaWZmZXJlbnQgY29sb3JzLCBmYWNlcywgZXRjPC9saT4KCQk8bGk+
d2F2YXRhcjogZ2VuZXJhdGVkIGZhY2VzIHdpdGggZGlmZmVyaW5nIGZlYXR1cmVzIGFuZCBi
YWNrZ3JvdW5kczwvbGk+CgkJPGxpPnJldHJvOiBhd2Vzb21lIGdlbmVyYXRlZCwgOC1iaXQg
YXJjYWRlLXN0eWxlIHBpeGVsYXRlZCBmYWNlczwvbGk+Cgk8L3VsPgoKCTxoND5yYXRpbmcg
KGRlZmF1bHQ6IGcpPC9oND4KCgk8cD5kZWZpbmVzIHRoZSByYXRpbmcgZm9yIHRoZSBncmF2
YXRhci48L3A+CgoJPHVsPgoJCTxsaT5nOiBzdWl0YWJsZSBmb3IgZGlzcGxheSBvbiBhbGwg
d2Vic2l0ZXMgd2l0aCBhbnkgYXVkaWVuY2UgdHlwZS48L2xpPgoJCTxsaT5wZzogbWF5IGNv
bnRhaW4gcnVkZSBnZXN0dXJlcywgcHJvdm9jYXRpdmVseSBkcmVzc2VkIGluZGl2aWR1YWxz
LCB0aGUgbGVzc2VyIHN3ZWFyIHdvcmRzLCBvciBtaWxkIHZpb2xlbmNlLjwvbGk+CgkJPGxp
PnI6IG1heSBjb250YWluIHN1Y2ggdGhpbmdzIGFzIGhhcnNoIHByb2Zhbml0eSwgaW50ZW5z
ZSB2aW9sZW5jZSwgbnVkaXR5LCBvciBoYXJkIGRydWcgdXNlLjwvbGk+CgkJPGxpPng6IG1h
eSBjb250YWluIGhhcmRjb3JlIHNleHVhbCBpbWFnZXJ5IG9yIGV4dHJlbWVseSBkaXN0dXJi
aW5nIHZpb2xlbmNlLjwvbGk+Cgk8L3VsPgoKCTxoND5pbWFnZSAoZGVmYXVsdDogMSk8L2g0
PgoKCTx1bD4KCQk8bGk+MTogcmV0dXJucyB0aGUgaW1hZ2UgdGFnIG9mIHRoZSBncmF2YXRh
cjwvbGk+CgkJPGxpPjA6IHJldHVybnMgdGhlIHVybCBvZiB0aGUgZ3JhdmF0YXI8L2xpPgoJ
PC91bD4KCgk8aDQ+Y2xhc3MgKGRlZmF1bHQ6IGVtcHR5KTwvaDQ+CgoJPHA+Y29udGVudCBv
ZiB0aGUgY2xhc3MtYXR0cmlidXRlIG9mIHRoZSBpbWFnZSB0YWcuPC9wPgoKCTxoND5hbHQg
KGRlZmF1bHQ6IGVtcHR5KTwvaDQ+CgoJPHA+Y29udGVudCBvZiB0aGUgYWx0LWF0dHJpYnV0
ZSBvZiB0aGUgaW1hZ2UgdGFnLjwvcD4KCgk8aDI+RXhhbXBsZXM8L2gyPgoKPHByZT48Y29k
ZT4mbHQ7dHhwOmdseF9ncmF2YXRhciAvJmd0OzsKPC9jb2RlPjwvcHJlPgoKPHByZT48Y29k
ZT4mbHQ7dHhwOmdseF9ncmF2YXRhciBzaXplPSZxdW90OzYwJnF1b3Q7IGRlZmF1bHQ9JnF1
b3Q7aHR0cDovL3d3dy5leGFtcGxlLmNvbS9pbWFnZXMvZ3JhdmF0YXIucG5nJnF1b3Q7IGNs
YXNzPSZxdW90O2dyYXZhdGFyJnF1b3Q7IC8mZ3Q7Owo8L2NvZGU+PC9wcmU+CgoJPHA+dXNl
ZCBpbiB0aGUgZm9ybSBjb21tZW50cyBpdCB3aWxsIHNob3cgdGhlIGdyYXZhdGFyIG9mIHRo
ZSBjdXJyZW50IGNvbW1lbnRhdG9yPC9wPgoKPHByZT48Y29kZT4mbHQ7dHhwOmdseF9ncmF2
YXRhciBlbWFpbD0mcXVvdDthZGRyZXNzQGV4YW1wbGUuY29tJnF1b3Q7OyAvJmd0Owo8L2Nv
ZGU+PC9wcmU+CgoJPHA+c2hvd3MgdGhlIGdyYXZhdGFyIGZvciBhZGRyZXNzQGV4YW1wbGUu
Y29tLjwvcD4KCjxwcmU+PGNvZGU+Jmx0O3R4cDpnbHhfZ3JhdmF0YXIgZW1haWw9JiMzOTsm
bHQ7dHhwOmdob19hdXRob3JfZW1haWwvJmd0OyYjMzk7LyZndDsKPC9jb2RlPjwvcHJlPgoK
CTxwPlNob3dzIHRoZSBncmF2YXRhciBmb3IgdGhlIGF1dGhvciBvZiB0aGUgY3VycmVudCBh
cnRpY2xlLjwvcD4KCgk8aDM+UmVsZWFzZSBIaXN0b3J5PC9oMz4KCgk8cD5WZXJzaW9uIDEu
MCAmIzgyMTE7IFNlcHRlbWJlciAxNXRoLCAyMDE0PC9wPgoKCTx1bD4KCQk8bGk+SW5pdGlh
bCBSZWxlYXNlPC9saT4KCTwvdWw+IjtzOjM6Im1kNSI7czozMjoiMTcyMGVkMDg5ZWVlZGNi
MDA1ZTJkODQ2OWU5YmIxOGEiO30=
